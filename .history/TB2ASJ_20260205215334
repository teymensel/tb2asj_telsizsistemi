#!/usr/bin/env python3
"""
TB2ASJ Linux Başlatıcı
Bu dosya Linux sistemlerde doğrudan çalıştırılabilir.
Terminalden: ./TB2ASJ
veya Dosya Yöneticisinden: Çift tıklayıp "Çalıştır" (Run)
"""
import sys
import os
import subprocess

def check_dependencies():
    """Gerekli kütüphaneleri kontrol et"""
    required = ["PyQt6", "requests", "pygame", "sounddevice", "numpy", "edge-tts", "gTTS", "pyserial"]
    missing = []
    
    for pkg in required:
        try:
            __import__(pkg.replace("-", "_").replace("PyQt6", "PyQt6.QtWidgets"))
        except ImportError:
            missing.append(pkg)
            
    if missing:
        print(f"Eksik kütüphaneler tespit edildi: {', '.join(missing)}")
        print("Kuruluyor...")
        try:
            subprocess.check_call([sys.executable, "-m", "pip", "install"] + missing)
            print("Kurulum tamamlandı!")
            return True
        except Exception as e:
            print(f"Kurulum başarısız: {e}")
            return False
    return True

if __name__ == "__main__":
    # Çalışma dizinini ayarla
    os.chdir(os.path.dirname(os.path.abspath(__file__)))
    
    # Bağımlılıkları kontrol et (İsteğe bağlı, kiosk için iyi olabilir)
    # check_dependencies() 
    
    # Ana uygulamayı başlat
    try:
        from main import main
        main()
    except ImportError:
        # main.py içe aktarılamazsa, direk çalıştır
        subprocess.call([sys.executable, "main.py"])
